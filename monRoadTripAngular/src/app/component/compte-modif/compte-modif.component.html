<head>
  <meta charset="utf-8" />
  <title>Gestion du compte</title>

  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn"
    crossorigin="anonymous"
  />
  <script
    src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
    crossorigin="anonymous"
  ></script>
</head>

<body>
  <div>
    <main class="mainGestion">
      <div>
        <h2 class="titre" align="center">Informations du compte</h2>
      </div>
      <div class="formGestionCompte" *ngIf="compte.type == 'client'">
        >
        <table id="infos">
          <tr>
            <td>Prénom :</td>
            <td><input type="text" [(ngModel)]="compte.prenom" /></td>
          </tr>
          <tr>
            <td>Nom :</td>
            <td><input type="text" [(ngModel)]="compte.nom" /></td>
          </tr>
          <tr>
            <td>Date de naissance :</td>
            <td><input type="date" [(ngModel)]="compte.dateNaissance" /></td>
          </tr>
          <tr>
            <td>Email :</td>
            <td>
              <input type="text" [(ngModel)]="compte.mail" disabled="true" />
            </td>
          </tr>
          <tr>
            <td>Type de compte :</td>
            <td>
              <input type="text" [(ngModel)]="compte.type" disabled="true" />
            </td>
          </tr>
          <tr>
            <td>Numéro :</td>
            <td>
              <input type="text" [(ngModel)]="compte.adresse!.numero" />
            </td>
          </tr>
          <tr>
            <td>Voie :</td>
            <td>
              <input type="text" [(ngModel)]="compte.adresse!.voie" />
            </td>
          </tr>
          <tr>
            <td>Ville :</td>
            <td>
              <input type="text" [(ngModel)]="compte.adresse!.ville" />
            </td>
          </tr>
          <tr>
            <td>Code Postal :</td>
            <td>
              <input type="text" [(ngModel)]="compte.adresse!.cp" />
            </td>
          </tr>

          <tr>
            <td>Type de paiement :</td>
            <td>
              <select class="typeDePaiement" name="typeDePaiement">
                <option value="1">Carte</option>
                <option value="2">Paypal</option>
              </select>
            </td>
          </tr>
        </table>
        <div>
          <button class="btn btn-primary" (click)="edit()">Valider</button>
        </div>

        <div class="formGestionCompte" *ngIf="compte.type != 'client'">
          >
          <table id="infos">
            <tr>
              <td>Prénom :</td>
              <td><input type="text" [(ngModel)]="compte.prenom" /></td>
            </tr>
            <tr>
              <td>Nom :</td>
              <td><input type="text" [(ngModel)]="compte.nom" /></td>
            </tr>
            <tr>
              <td>Date de naissance :</td>
              <td><input type="date" [(ngModel)]="compte.dateNaissance" /></td>
            </tr>
            <tr>
              <td>Email :</td>
              <td>
                <input type="text" [(ngModel)]="compte.mail" disabled="true" />
              </td>
            </tr>
            <tr>
              <td>Type de compte :</td>
              <td>
                <input type="text" [(ngModel)]="compte.type" disabled="true" />
              </td>
            </tr>
          </table>
          <div>
            <button class="btn btn-primary" (click)="edit()">Valider</button>
          </div>
        </div>

        <div>
          <div>
            <h2 class="titre" align="center">Modification du mot de passe</h2>
          </div>
          <div>
            <form
              (ngSubmit)="editPassword()"
              [formGroup]="form"
              class="formGestionCompte"
            >
              <table>
                <tr>
                  <td>Mot de passe :</td>
                  <td>
                    <input
                      type="password"
                      class="form-control"
                      formControlName="password"
                    />
                  </td>
                </tr>
                <div
                  *ngIf="
                    form.get('password')?.dirty && form.get('password')?.invalid
                  "
                  class="alert alert-success"
                >
                  Le mot de passe doit faire en 5 et 25 caractères comprennant
                  au moins une majuscule, une minuscule, un chiffre et un
                  caractere spécial (*_!@-)
                </div>
                <tr>
                  <td>Vérification du mot de passe :</td>
                  <td>
                    <input
                      type="password"
                      class="form-control"
                      formControlName="confirm"
                    />
                  </td>
                </tr>
                <div
                  *ngIf="form.invalid && form.get('confirm')?.dirty"
                  class="alert alert-danger"
                >
                  Les deux saisies de mot de passe sont différentes
                </div>
              </table>
            </form>
            <div>
              <button
                class="btn btn-primary"
                (click)="editPassword()"
                [disabled]="form.invalid"
              >
                Valider
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <footer class="container">
    <p class="float-right">
      <a href="">Retour en haut</a>
    </p>
    <p>&copy; 2022 - Mon road trip&middot; <a href="#">Confidentialité</a></p>
  </footer>
</body>
