<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""
/>
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"
/>
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css"
/>
<div id="contenu">
  <div id="recherche">
    <label>Ville recherchée: </label>
    <input type="text" [(ngModel)]="ville" class="form-control" />
    <button (click)="list()" class="btn btn-outline-info">Rechercher</button>
  </div>
  <div>
    <input
      type="radio"
      id="activites"
      name="drone"
      value="activites"
      checked
      [(ngModel)]="myRadio"
    />
    <label for="activites">Activités</label>
  </div>
  <div>
    <input
      type="radio"
      id="logements"
      name="drone"
      value="logements"
      [(ngModel)]="myRadio"
    />
    <label for="logements">Logements</label>
  </div>
  <div id="tableaux">
    <form [formGroup]="form" (ngSubmit)="submit()">
      <div *ngIf="myRadio == 'logements'">
        <h2>Liste des logements à {{ ville }}</h2>

        <table class="table">
          <tr>
            <td></td>
            <td>id</td>
            <td>date</td>
            <td>prix</td>
            <td>cp</td>
            <td>numero</td>
            <td>voie</td>
            <td>ville</td>
            <td>nb de places</td>
          </tr>

          <tr
            *ngFor="let l of logementsArray.controls; let i = index"
            formArrayName="logementsArray"
          >
            <td>
              <input [formControlName]="i" type="checkbox" />
            </td>
            <td>{{ logements[i].id }}</td>
            <td>{{ logements[i].date | date: "dd/MM/yyyy" }}</td>
            <td>{{ logements[i].prix }}</td>
            <td>{{ logements[i].adresse?.cp }}</td>
            <td>{{ logements[i].adresse?.numero }}</td>
            <td>{{ logements[i].adresse?.voie }}</td>
            <td>{{ logements[i].adresse?.ville }}</td>
            <td>{{ logements[i].nbPlaces }}</td>
          </tr>
        </table>
      </div>
      <div *ngIf="myRadio == 'activites'">
        <h2>Liste des activites à {{ ville }}</h2>
        <table class="table">
          <tr>
            <td></td>
            <td>id</td>
            <td>date</td>
            <td>heure</td>
            <td>prix</td>
            <td>categorie</td>
            <td>cp</td>
            <td>numero</td>
            <td>voie</td>
            <td>ville</td>
            <td>nb de places</td>
            <td>intitule</td>
          </tr>

          <tr
            *ngFor="let a of activitesArray.controls; let i = index"
            formArrayName="activitesArray"
          >
            <td>
              <input [formControlName]="i" type="checkbox" />
            </td>
            <td>{{ activites[i].id }}</td>
            <td>{{ activites[i].date | date: "dd/MM/yyyy" }}</td>
            <td>{{ activites[i].heure }}</td>
            <td>{{ activites[i].prix }}</td>
            <td>{{ activites[i].categorie }}</td>
            <td>{{ activites[i].adresse?.cp }}</td>
            <td>{{ activites[i].adresse?.numero }}</td>
            <td>{{ activites[i].adresse?.voie }}</td>
            <td>{{ activites[i].adresse?.ville }}</td>
            <td>{{ activites[i].nbPlaces }}</td>
            <td>{{ activites[i].intitule }}</td>
          </tr>
        </table>
        <button type="submit">Reserver</button>
      </div>
    </form>
    <button (click)="redirect()">Suivant</button>
  </div>
</div>
<div class="containerMap">
  <div class="list" *ngIf="myRadio == 'activites'">
    <div *ngFor="let a of activites">
      <div class="card shadow-sm">
        <img
          src="assets/images/chenonceau.jpg"
          class="bd-placeholder-img card-img-top"
          width="100%"
          height="150"
        /><title></title>{{ a.intitule }}

        <div class="card-body">
          <p class="card-text"></p>
          <p>{{ a.categorie }}</p>
          <p>{{ a.prix }} €</p>
          <p>{{ a.date }}</p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="myRadio == 'logements'">
    <div *ngFor="let l of logements">
      <div class="col">
        <div class="card shadow-sm">
          <img
            src="assets/images/chenonceau.jpg"
            class="bd-placeholder-img card-img-top"
            width="100%"
            height="150"
            role="img"
            aria-label="Placeholder: Thumbnail"
            preserveAspectRatio="xMidYMid slice"
            focusable="false"
          /><title></title>{{ l.adresse!.ville }}

          <div class="card-body">
            <p class="card-text"></p>
            <p>{{ l.nbPlaces }} personnes</p>
            <p>{{ l.prix }} €</p>
            <p>{{ l.date }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="frugalmap"></div>
</div>
